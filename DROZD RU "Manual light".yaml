blueprint:
  name: DROZD RU "Manual light"
  description: "# ü™Ñ –†—É—á–Ω–æ–π —Å–≤–µ—Ç\n**–í–µ—Ä—Å–∏—è: 1.3**\n\nüëã –ü–æ–ø—Ä–æ—â–∞–π—Ç–µ—Å—å —Å–æ —Å–≤–µ—Ç–æ–º, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–±—ã–ª–∏ –≤—ã–∫–ª—é—á–∏—Ç—å! –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –∫ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–º—É –æ—Å–≤–µ—â–µ–Ω–∏—é —Å –∞–≤—Ç–æ–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ–º –∏ —Å–±—Ä–æ—Å–æ–º –ø–æ –¥–∞—Ç—á–∏–∫—É –¥–≤–∏–∂–µ–Ω–∏—è. ü™Ñüí°\n\n**–ï—Å–ª–∏ –≤–∞–º –Ω—Ä–∞–≤—è—Ç—Å—è –º–æ–∏ blueprints –∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø–æ–¥–¥–µ—Ä–∂–∞—Ç—å –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ —Å–∫–∞–∑–∞—Ç—å —Å–ø–∞—Å–∏–±–æ** ‚Äî [–Ω–∞–∂–º–∏—Ç–µ –∑–¥–µ—Å—å](https://www.paypal.com/donate/?hosted_button_id=WAZS3QSDTPGA8) üôÇ\n\n<details> <summary><b>–ü—Ä–æ—Ü–µ—Å—Å –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏:</b> üëá</summary>\n\n\n  - **–¢—Ä–∏–≥–≥–µ—Ä:**\n    - –ö–æ–≥–¥–∞ —Å—É—â–Ω–æ—Å—Ç—å –≤—Ä—É—á–Ω—É—é –≤–∫–ª—é—á–µ–Ω–∞ (ON), –æ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–∫–ª—é—á–∏—Ç—Å—è –ø–æ—Å–ª–µ –∑–∞–¥–∞–Ω–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–∏.\n\n  - **–û–ø—Ü–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Ç—Ä–∏–≥–≥–µ—Ä–∞:**\n    - –ï—Å–ª–∏ –≤—ã–±—Ä–∞–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—É—â–Ω–æ—Å—Ç–µ–π –∏ –æ–¥–Ω–∞ –≤—Ä—É—á–Ω—É—é –≤–∫–ª—é—á–∞–µ—Ç—Å—è/–≤—ã–∫–ª—é—á–∞–µ—Ç—Å—è, –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç —Å–≤–æ—ë —Å–æ—Å—Ç–æ—è–Ω–∏–µ.\n\n  - **–û–ø—Ü–∏—è –¥–∞—Ç—á–∏–∫–∞ –¥–≤–∏–∂–µ–Ω–∏—è:**\n    - –ü—Ä–∏ —Ä—É—á–Ω–æ–º –≤–∫–ª—é—á–µ–Ω–∏–∏ —Å–≤–µ—Ç–∞ –∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –¥–≤–∏–∂–µ–Ω–∏—è —Ç–∞–π–º–µ—Ä —Å—Ç–∞–≤–∏—Ç—Å—è –Ω–∞ –ø–∞—É–∑—É.\n    - –ö–æ–≥–¥–∞ –¥–≤–∏–∂–µ–Ω–∏–µ –ø—Ä–µ–∫—Ä–∞—â–∞–µ—Ç—Å—è, —Ç–∞–π–º–µ—Ä —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∑–∞–Ω–æ–≤–æ.\n    - –ï—Å–ª–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–∞–π–º–µ—Ä helper, –∑–∞–¥–µ—Ä–∂–∫–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∑–∞–Ω–æ–≤–æ –ø–æ—Å–ª–µ –æ–∫–æ–Ω—á–∞–Ω–∏—è –¥–≤–∏–∂–µ–Ω–∏—è.\n\n  - **–õ—å–≥–æ—Ç–Ω—ã–π –ø–µ—Ä–∏–æ–¥:**\n    - –ü–æ—Å–ª–µ –∞–≤—Ç–æ-–≤—ã–∫–ª—é—á–µ–Ω–∏—è –ø–æ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—é –¥–≤–∏–∂–µ–Ω–∏—è –∫–æ—Ä–æ—Ç–∫–∏–π –ª—å–≥–æ—Ç–Ω—ã–π –ø–µ—Ä–∏–æ–¥ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–≤–µ—Ç—É —Å–Ω–æ–≤–∞ –≤–∫–ª—é—á–∏—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –µ—Å–ª–∏ –ø–æ—è–≤–∏—Ç—Å—è –¥–≤–∏–∂–µ–Ω–∏–µ.\n    - –ü–æ—Å–ª–µ –æ–∫–æ–Ω—á–∞–Ω–∏—è –ª—å–≥–æ—Ç–Ω–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞ —Å–≤–µ—Ç –º–æ–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å —Ç–æ–ª—å–∫–æ –≤—Ä—É—á–Ω—É—é.\n    - **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** —Ä—É—á–Ω–æ–µ –≤—ã–∫–ª—é—á–µ–Ω–∏–µ –≤—Å–µ–≥–¥–∞ –∏–º–µ–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç.\n\n  - **–û–±—Ö–æ–¥ (Bypass):**\n    - –ü–æ–∑–≤–æ–ª—è–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å —Å–≤–µ—Ç–æ–º –≤—Ä—É—á–Ω—É—é.\n\n  - **–ü–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ HA:**\n    - –° —Ç–∞–π–º–µ—Ä–æ–º helper: —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ç–∞–π–º–µ—Ä–∞ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è.\n    - –ë–µ–∑ —Ç–∞–π–º–µ—Ä–∞ helper: –∑–∞–¥–µ—Ä–∂–∫–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∑–∞–Ω–æ–≤–æ.\n</details>\n\n–ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å?\nFAQ: [–ù–∞–∂–º–∏—Ç–µ –∑–¥–µ—Å—å](https://community.home-assistant.io/t/688273/2)\n–°–æ–æ–±—â–µ—Å—Ç–≤–æ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: [–ù–∞–∂–º–∏—Ç–µ –∑–¥–µ—Å—å](https://community.home-assistant.io/t/688273/1)\n\n–¢—Ä–µ–±—É–µ—Ç—Å—è = *\n"
  domain: automation
  input:
    trigger:
      name: –¢—Ä–∏–≥–≥–µ—Ä *
      icon: mdi:cog-outline
      collapsed: true
      input:
        trigger_input:
          name: –¢—Ä–∏–≥–≥–µ—Ä ‚Äî –°–≤–µ—Ç –∏ –≤—ã–∫–ª—é—á–∞—Ç–µ–ª–∏ *
          description: "–í—ã–±–µ—Ä–∏—Ç–µ —Å—É—â–Ω–æ—Å—Ç–∏, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–∫–ª—é—á–∞—Ç—å—Å—è –ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–∏.\n\n**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ** ‚Äî –í—Å–µ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏ –¥–æ–ª–∂–Ω—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å ON –∏ OFF.\n"
          default: []
          selector:
            entity:
              filter:
              - domain:
                - light
                - switch
              multiple: true
              reorder: false
        time_delay:
          name: –ó–∞–¥–µ—Ä–∂–∫–∞ –≤—Ä–µ–º–µ–Ω–∏
          description: "–£–∫–∞–∂–∏—Ç–µ, —Å–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ —Å–≤–µ—Ç –∏ –≤—ã–∫–ª—é—á–∞—Ç–µ–ª–∏ –±—É–¥—É—Ç –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –≤–æ –≤–∫–ª—é—á—ë–Ω–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –ø–µ—Ä–µ–¥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –≤—ã–∫–ª—é—á–µ–Ω–∏–µ–º.\n\n–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–∞—Ç—á–∏–∫ –¥–≤–∏–∂–µ–Ω–∏—è, —Ç–∞–π–º–µ—Ä —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –¥–≤–∏–∂–µ–Ω–∏—è. –ö–æ–≥–¥–∞ –¥–≤–∏–∂–µ–Ω–∏—è –Ω–µ—Ç –∏ –∑–∞–¥–µ—Ä–∂–∫–∞ –∏—Å—Ç–µ–∫–∞–µ—Ç ‚Äî –≤—ã–∫–ª—é—á–µ–Ω–∏–µ.\n"
          default:
            days: 0
            hours: 0
            minutes: 5
            seconds: 0
          selector:
            duration: {}
        include_timer_helper:
          name: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–ø—Ü–∏—é —Ç–∞–π–º–µ—Ä–∞ helper (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
          description: "–í–∫–ª—é—á–∏—Ç–µ, –µ—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–∞–π–º–µ—Ä helper.\n\n**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ** ‚Äî –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ç–∞–π–º–µ—Ä–∞ helper –æ—Ç–º–µ—Ç—å—Ç–µ —Ñ–ª–∞–∂–æ–∫ `Restore`, —á—Ç–æ–±—ã –æ–Ω –ø–µ—Ä–µ–∂–∏–≤–∞–ª –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ Home Assistant. –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–µ –∑–∞–¥–∞–≤–∞–π—Ç–µ –≤ —Å–∞–º–æ–º —Ç–∞–π–º–µ—Ä–µ helper ‚Äî –æ–Ω–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –Ω–∏–∂–µ.\n\n–ü–æ–¥—Ä–æ–±–Ω–µ–µ: [–Ω–∞–∂–º–∏—Ç–µ –∑–¥–µ—Å—å](https://community.home-assistant.io/t/688273/4)\n"
          default: disable_timer_helper
          selector:
            select:
              options:
              - label: "–í–∫–ª—é—á–∏—Ç—å –æ–ø—Ü–∏—é —Ç–∞–π–º–µ—Ä–∞ helper"
                value: enable_timer_helper
              - label: "–û—Ç–∫–ª—é—á–∏—Ç—å –æ–ø—Ü–∏—é —Ç–∞–π–º–µ—Ä–∞ helper"
                value: disable_timer_helper
              sort: false
              multiple: false
              custom_value: false
        timer_helper:
          name: –¢–∞–π–º–µ—Ä helper
          description: "–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∞–π–º–µ—Ä helper, –µ—Å–ª–∏ –æ–ø—Ü–∏—è —Ç–∞–π–º–µ—Ä–∞ –≤–∫–ª—é—á–µ–Ω–∞ –≤—ã—à–µ.\n"
          default: []
          selector:
            entity:
              filter:
              - domain:
                - timer
              multiple: false
              reorder: false
        include_trigger_sync:
          name: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–ø—Ü–∏—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
          description: "–í–∫–ª—é—á–∏—Ç–µ –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–π ON/OFF –≤—Å–µ—Ö –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π. –ï—Å–ª–∏ –≤—ã–±—Ä–∞–Ω–æ –±–æ–ª–µ–µ –æ–¥–Ω–æ–π ‚Äî –æ–Ω–∏ –±—É–¥—É—Ç –≤–∫–ª—é—á–∞—Ç—å—Å—è –∏ –≤—ã–∫–ª—é—á–∞—Ç—å—Å—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.\n"
          default: disable_trigger_sync
          selector:
            select:
              options:
              - label: "–í–∫–ª—é—á–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é"
                value: enable_trigger_sync
              - label: "–û—Ç–∫–ª—é—á–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é"
                value: disable_trigger_sync
              sort: false
              multiple: false
              custom_value: false
    motion:
      name: –î–∞—Ç—á–∏–∫ –¥–≤–∏–∂–µ–Ω–∏—è
      icon: mdi:motion-sensor
      collapsed: true
      input:
        include_motion_trigger:
          name: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–ø—Ü–∏—é –¥–∞—Ç—á–∏–∫–∞ –¥–≤–∏–∂–µ–Ω–∏—è (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
          description: "–í–∫–ª—é—á–∏—Ç–µ, —á—Ç–æ–±—ã –∑–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å –¥–∞—Ç—á–∏–∫ –¥–≤–∏–∂–µ–Ω–∏—è. –ü—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –¥–≤–∏–∂–µ–Ω–∏—è —Ç–∞–π–º–µ—Ä (helper –∏–ª–∏ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π) —Å—Ç–∞–≤–∏—Ç—Å—è –Ω–∞ –ø–∞—É–∑—É –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –æ–∫–æ–Ω—á–∞–Ω–∏—è –¥–≤–∏–∂–µ–Ω–∏—è.\n"
          default: disable_motion_trigger
          selector:
            select:
              options:
              - label: "–í–∫–ª—é—á–∏—Ç—å –¥–∞—Ç—á–∏–∫ –¥–≤–∏–∂–µ–Ω–∏—è"
                value: enable_motion_trigger
              - label: "–û—Ç–∫–ª—é—á–∏—Ç—å –¥–∞—Ç—á–∏–∫ –¥–≤–∏–∂–µ–Ω–∏—è"
                value: disable_motion_trigger
              sort: false
              multiple: false
              custom_value: false
        motion_trigger:
          name: –î–∞—Ç—á–∏–∫ –¥–≤–∏–∂–µ–Ω–∏—è ‚Äî –±–∏–Ω–∞—Ä–Ω—ã–µ —Å–µ–Ω—Å–æ—Ä—ã
          description: "–í—ã–±–µ—Ä–∏—Ç–µ –æ–¥–∏–Ω –¥–∞—Ç—á–∏–∫ –¥–≤–∏–∂–µ–Ω–∏—è (binary_sensor). –ß—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ ‚Äî —Å–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞–π—Ç–µ –≥—Ä—É–ø–ø—É (group helper).\n\n–ü–æ–¥—Ä–æ–±–Ω–µ–µ: [–Ω–∞–∂–º–∏—Ç–µ –∑–¥–µ—Å—å](https://community.home-assistant.io/t/688273/3)\n"
          default: []
          selector:
            entity:
              filter:
              - domain:
                - binary_sensor
              multiple: false
              reorder: false
    grace_period:
      name: –õ—å–≥–æ—Ç–Ω—ã–π –ø–µ—Ä–∏–æ–¥
      icon: mdi:timer-outline
      collapsed: true
      input:
        include_grace_period:
          name: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª—å–≥–æ—Ç–Ω—ã–π –ø–µ—Ä–∏–æ–¥ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
          description: "–í–∫–ª—é—á–∏—Ç–µ –∫–æ—Ä–æ—Ç–∫–∏–π –ø–µ—Ä–∏–æ–¥ –ø–æ—Å–ª–µ –∞–≤—Ç–æ-–≤—ã–∫–ª—é—á–µ–Ω–∏—è –∏–∑‚Äë–∑–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –¥–≤–∏–∂–µ–Ω–∏—è. –ï—Å–ª–∏ –¥–≤–∏–∂–µ–Ω–∏–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ —ç—Ç–æ—Ç –ø–µ—Ä–∏–æ–¥ ‚Äî —Å–≤–µ—Ç –≤–∫–ª—é—á–∏—Ç—Å—è —Å–Ω–æ–≤–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏. –ü–æ—Å–ª–µ –æ–∫–æ–Ω—á–∞–Ω–∏—è –ø–µ—Ä–∏–æ–¥–∞ ‚Äî —Ç–æ–ª—å–∫–æ –≤—Ä—É—á–Ω—É—é.\n\n**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ** ‚Äî –¢—Ä–µ–±—É–µ—Ç—Å—è –≤–∫–ª—é—á—ë–Ω–Ω—ã–π –¥–∞—Ç—á–∏–∫ –¥–≤–∏–∂–µ–Ω–∏—è.\n"
          default: disable_grace_period
          selector:
            select:
              options:
              - label: "–í–∫–ª—é—á–∏—Ç—å –ª—å–≥–æ—Ç–Ω—ã–π –ø–µ—Ä–∏–æ–¥"
                value: enable_grace_period
              - label: "–û—Ç–∫–ª—é—á–∏—Ç—å –ª—å–≥–æ—Ç–Ω—ã–π –ø–µ—Ä–∏–æ–¥"
                value: disable_grace_period
              sort: false
              multiple: false
              custom_value: false
        grace_period_timer_helper:
          name: –¢–∞–π–º–µ—Ä –ª—å–≥–æ—Ç–Ω–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞ (helper)
          description: "–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∞–π–º–µ—Ä helper –¥–ª—è –ª—å–≥–æ—Ç–Ω–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞.\n\n**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ** ‚Äî –û—Ç–º–µ—Ç—å—Ç–µ `Restore`. –ù–µ –∑–∞–¥–∞–≤–∞–π—Ç–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤ —Å–∞–º–æ–º —Ç–∞–π–º–µ—Ä–µ ‚Äî –æ–Ω–∞ –±–µ—Ä—ë—Ç—Å—è –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –Ω–∏–∂–µ.\n\n–ï—Å–ª–∏ –≤—ã—à–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ—Å–Ω–æ–≤–Ω–æ–π —Ç–∞–π–º–µ—Ä helper ‚Äî –∑–¥–µ—Å—å –Ω—É–∂–µ–Ω –æ—Ç–¥–µ–ª—å–Ω—ã–π.\n\n–ü–æ–¥—Ä–æ–±–Ω–µ–µ: [–Ω–∞–∂–º–∏—Ç–µ –∑–¥–µ—Å—å](https://community.home-assistant.io/t/688273/4)\n"
          default: []
          selector:
            entity:
              filter:
              - domain:
                - timer
              multiple: false
              reorder: false
        grace_period_time_delay:
          name: –ó–∞–¥–µ—Ä–∂–∫–∞ –ª—å–≥–æ—Ç–Ω–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞
          description: "–£–∫–∞–∂–∏—Ç–µ –¥–ª–∏–Ω—É –ª—å–≥–æ—Ç–Ω–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞. –í —Ç–µ—á–µ–Ω–∏–µ –Ω–µ–≥–æ –¥–≤–∏–∂–µ–Ω–∏–µ –≤–Ω–æ–≤—å –≤–∫–ª—é—á–∞–µ—Ç —Å–≤–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏; –ø–æ—Å–ª–µ –æ–∫–æ–Ω—á–∞–Ω–∏—è ‚Äî —Ç–æ–ª—å–∫–æ –≤—Ä—É—á–Ω—É—é.\n"
          default:
            days: 0
            hours: 0
            minutes: 5
            seconds: 0
          selector:
            duration: {}
        saved_lights_input:
          name: –¢–µ–∫—Å—Ç–æ–≤—ã–π helper –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤–∫–ª—é—á—ë–Ω–Ω—ã—Ö –æ–≥–Ω–µ–π
          description: "–ü—Ä–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å—É—â–Ω–æ—Å—Ç—è—Ö –±–µ–∑ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –≤—ã–±–µ—Ä–∏—Ç–µ `input_text` –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –≤–∫–ª—é—á—ë–Ω–Ω—ã—Ö –æ–≥–Ω–µ–π. –ü—Ä–∏ –æ–¥–Ω–æ–π —Å—É—â–Ω–æ—Å—Ç–∏ –∏–ª–∏ –≤–∫–ª—é—á—ë–Ω–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –ø—É—Å—Ç—ã–º.\n"
          default: []
          selector:
            entity:
              filter:
              - domain:
                - input_text
              multiple: false
              reorder: false
    bypass_settings:
      name: –û–±—Ö–æ–¥ (Bypass)
      icon: mdi:cog-pause-outline
      collapsed: true
      input:
        include_bypass:
          name: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–ø—Ü–∏–∏ –æ–±—Ö–æ–¥–∞ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
          description: "–í—ã–±–µ—Ä–∏—Ç–µ –æ–ø—Ü–∏–∏. –ö–∞–∂–¥–∞—è –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Å–≤–µ—Ç–∞ –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ –æ–±—Ö–æ–¥–Ω–æ–≥–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—è:\n\n  1 - –í–∫–ª—é—á–∏—Ç—å —Å–≤–µ—Ç\n  2 - –í—ã–∫–ª—é—á–∏—Ç—å —Å–≤–µ—Ç\n  3 - –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ\n\n–ï—Å–ª–∏ –æ–ø—Ü–∏—è –≤—ã–±—Ä–∞–Ω–∞ ‚Äî –∑–∞–¥–∞–π—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –Ω–∏–∂–µ.\n\n–ü–æ–¥—Ä–æ–±–Ω–µ–µ: [–Ω–∞–∂–º–∏—Ç–µ –∑–¥–µ—Å—å](https://community.home-assistant.io/t/688273/89)\n"
          default: []
          selector:
            select:
              options:
              - label: "1 - –û–±—Ö–æ–¥: –≤–∫–ª—é—á–∏—Ç—å —Å–≤–µ—Ç"
                value: bypass_enabled_turn_on
              - label: "2 - –û–±—Ö–æ–¥: –≤—ã–∫–ª—é—á–∏—Ç—å —Å–≤–µ—Ç"
                value: bypass_enabled_turn_off
              - label: "3 - –û–±—Ö–æ–¥: —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ"
                value: bypass_enabled_stop
              multiple: true
              sort: false
              custom_value: false
        bypass_lights_on:
          name: –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –æ–±—Ö–æ–¥–∞ ‚Äî –≤–∫–ª—é—á–∏—Ç—å —Å–≤–µ—Ç
          description: "–í—ã–±–µ—Ä–∏—Ç–µ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤–∫–ª—é—á–∞—è –æ–±—Ö–æ–¥ –±—É–¥—É—Ç –≤–∫–ª—é—á–∞—Ç—å —Å–≤–µ—Ç, –∏–≥–Ω–æ—Ä–∏—Ä—É—è —Ç—Ä–∏–≥–≥–µ—Ä. –û–Ω–∏ –Ω–µ –¥–æ–ª–∂–Ω—ã –≤—Ö–æ–¥–∏—Ç—å –≤ ¬´–¢—Ä–∏–≥–≥–µ—Ä ‚Äî –°–≤–µ—Ç –∏ –≤—ã–∫–ª—é—á–∞—Ç–µ–ª–∏¬ª.\n"
          default: []
          selector:
            entity:
              multiple: true
              reorder: false
        bypass_lights_off:
          name: –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –æ–±—Ö–æ–¥–∞ ‚Äî –≤—ã–∫–ª—é—á–∏—Ç—å —Å–≤–µ—Ç
          description: "–í—ã–±–µ—Ä–∏—Ç–µ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤–∫–ª—é—á–∞—è –æ–±—Ö–æ–¥ –±—É–¥—É—Ç –≤—ã–∫–ª—é—á–∞—Ç—å —Å–≤–µ—Ç, –∏–≥–Ω–æ—Ä–∏—Ä—É—è —Ç—Ä–∏–≥–≥–µ—Ä. –û–Ω–∏ –Ω–µ –¥–æ–ª–∂–Ω—ã –≤—Ö–æ–¥–∏—Ç—å –≤ ¬´–¢—Ä–∏–≥–≥–µ—Ä ‚Äî –°–≤–µ—Ç –∏ –≤—ã–∫–ª—é—á–∞—Ç–µ–ª–∏¬ª.\n"
          default: []
          selector:
            entity:
              multiple: true
              reorder: false
        bypass_lights_stop:
          name: –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –æ–±—Ö–æ–¥–∞ ‚Äî —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ
          description: "–í—ã–±–µ—Ä–∏—Ç–µ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–∏, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–±—Ö–æ–¥—è—Ç —Ç—Ä–∏–≥–≥–µ—Ä. –û–Ω–∏ –Ω–µ –¥–æ–ª–∂–Ω—ã –≤—Ö–æ–¥–∏—Ç—å –≤ ¬´–¢—Ä–∏–≥–≥–µ—Ä ‚Äî –°–≤–µ—Ç –∏ –≤—ã–∫–ª—é—á–∞—Ç–µ–ª–∏¬ª.\n"
          default: []
          selector:
            entity:
              multiple: true
              reorder: false
        bypass_time_delay:
          name: –û–±—Ö–æ–¥ ‚Äî –∑–∞–¥–µ—Ä–∂–∫–∞ –≤—Ä–µ–º–µ–Ω–∏
          description: "–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ —Å–≤–µ—Ç –≤–∫–ª—é—á—ë–Ω:\n  1. –û–ø—Ü–∏—è 2 (–æ–±—Ö–æ–¥: –≤—ã–∫–ª—é—á–∏—Ç—å —Å–≤–µ—Ç) –∞–∫—Ç–∏–≤–Ω–∞ –∏ –æ–±—Ö–æ–¥ –≤–∫–ª—é—á—ë–Ω.\n  2. –í—Å–µ –æ–±—Ö–æ–¥—ã –≤—ã–∫–ª—é—á–µ–Ω—ã, –Ω–æ —Å–≤–µ—Ç –æ—Å—Ç–∞—ë—Ç—Å—è –≤–∫–ª—é—á—ë–Ω.\n\n–í –æ–±–æ–∏—Ö —Å–ª—É—á–∞—è—Ö —Å–≤–µ—Ç –±—É–¥–µ—Ç –≤—ã–∫–ª—é—á–µ–Ω –ø–æ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ –∑–∞–¥–µ—Ä–∂–∫–∏.\n"
          default: 0
          selector:
            number:
              min: 0.0
              max: 10.0
              step: 0.25
              unit_of_measurement: minutes
              mode: slider
        include_bypass_auto_off:
          name: –ê–≤—Ç–æ-–≤—ã–∫–ª—é—á–µ–Ω–∏–µ –æ–±—Ö–æ–¥–∞ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
          description: "–í–∫–ª—é—á–∏—Ç–µ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –æ–±—Ö–æ–¥–∞ —á–µ—Ä–µ–∑ –∑–∞–¥–µ—Ä–∂–∫—É. –ú–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å, –∫ –∫–∞–∫–∏–º –æ–ø—Ü–∏—è–º –ø—Ä–∏–º–µ–Ω—è—Ç—å:\n  1 - –í–∫–ª—é—á–∏—Ç—å —Å–≤–µ—Ç\n  2 - –í—ã–∫–ª—é—á–∏—Ç—å —Å–≤–µ—Ç\n  3 - –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ\n\n–ö–∞–∂–¥–∞—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ–¥–Ω–æ–π –∏–∑ –æ–ø—Ü–∏–π –≤—ã—à–µ.\n"
          default: []
          selector:
            select:
              options:
              - label: "A - –ê–≤—Ç–æ-–≤—ã–∫–ª—é—á–µ–Ω–∏–µ –¥–ª—è –æ–ø—Ü–∏–∏ 1 (–≤–∫–ª—é—á–∏—Ç—å —Å–≤–µ—Ç)"
                value: bypass_auto_off_enabled_on
              - label: "B - –ê–≤—Ç–æ-–≤—ã–∫–ª—é—á–µ–Ω–∏–µ –¥–ª—è –æ–ø—Ü–∏–∏ 2 (–≤—ã–∫–ª—é—á–∏—Ç—å —Å–≤–µ—Ç)"
                value: bypass_auto_off_enabled_off
              - label: "C - –ê–≤—Ç–æ-–≤—ã–∫–ª—é—á–µ–Ω–∏–µ –¥–ª—è –æ–ø—Ü–∏–∏ 3 (—Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ)"
                value: bypass_auto_off_enabled_stop
              multiple: true
              sort: false
              custom_value: false
        bypass_auto_off_delay:
          name: –ó–∞–¥–µ—Ä–∂–∫–∞ –∞–≤—Ç–æ-–≤—ã–∫–ª—é—á–µ–Ω–∏—è –æ–±—Ö–æ–¥–∞
          description: "–í—Ä–µ–º—è –¥–æ –∞–≤—Ç–æ-–≤—ã–∫–ª—é—á–µ–Ω–∏—è –æ–±—Ö–æ–¥–∞. –û—Ç—Å—á—ë—Ç –∏–¥—ë—Ç –æ—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –≤–∫–ª—é—á—ë–Ω–Ω–æ–≥–æ –æ–±—Ö–æ–¥–∞. –ï—Å–ª–∏ –æ–¥–∏–Ω –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≤—ã–∫–ª—é—á–∏—Ç—å ‚Äî –∑–∞–¥–µ—Ä–∂–∫–∞ —Ç–∞–∫–∂–µ —Å–±—Ä–æ—Å–∏—Ç—Å—è.\n"
          default: 60
          selector:
            number:
              min: 1.0
              max: 240.0
              step: 1.0
              unit_of_measurement: minutes
              mode: slider
  source_url: https://gist.github.com/Blackshome/9f9785d7aa0ba7978fa6515a2d73d192
mode: restart
max_exceeded: silent
variables:
  trigger_input: !input trigger_input
  time_delay: !input time_delay
  include_timer_helper: !input include_timer_helper
  timer_helper: !input timer_helper
  include_trigger_sync: !input include_trigger_sync
  include_motion_trigger: !input include_motion_trigger
  motion_trigger: !input motion_trigger
  include_grace_period: !input include_grace_period
  grace_period_timer_helper: !input grace_period_timer_helper
  grace_period_time_delay: !input grace_period_time_delay
  saved_lights_input: !input saved_lights_input
  include_bypass: !input include_bypass
  bypass_lights_on: !input bypass_lights_on
  bypass_lights_off: !input bypass_lights_off
  bypass_lights_stop: !input bypass_lights_stop
  bypass_time_delay: !input bypass_time_delay
  include_bypass_auto_off: !input include_bypass_auto_off
  bypass_auto_off_delay: !input bypass_auto_off_delay
  trigger_entities_on: "{{ expand(trigger_input)\n    | selectattr('state', 'eq', 'on')\n    | map(attribute='entity_id')\n    | list }}\n"
  trigger_entities_off: "{{ expand(trigger_input)\n    | selectattr('state', 'eq', 'off')\n    | map(attribute='entity_id')\n    | list }}\n"
triggers:
- trigger: state
  id: t1
  entity_id: !input trigger_input
  from: 'off'
  to: 'on'
- trigger: state
  id: t2
  entity_id: !input trigger_input
  from: 'on'
  to: 'off'
- trigger: state
  entity_id: !input timer_helper
  to: idle
  id: t3
- trigger: state
  id: t4
  entity_id: !input motion_trigger
  from: 'off'
  to: 'on'
- trigger: state
  id: t5_on
  entity_id: !input bypass_lights_on
  from: 'off'
  to: 'on'
- trigger: state
  id: t5_off
  entity_id: !input bypass_lights_off
  from: 'off'
  to: 'on'
- trigger: state
  id: t5_stop
  entity_id: !input bypass_lights_stop
  from: 'off'
  to: 'on'
- trigger: state
  id: t6_on
  entity_id: !input bypass_lights_on
  from: 'on'
  to: 'off'
- trigger: state
  id: t6_off
  entity_id: !input bypass_lights_off
  from: 'on'
  to: 'off'
- trigger: state
  id: t6_stop
  entity_id: !input bypass_lights_stop
  from: 'on'
  to: 'off'
- trigger: homeassistant
  id: t7
  event: start
condition:
- condition: or
  conditions:
  - condition: and
    conditions:
    - condition: trigger
      id: t1
    - condition: state
      entity_id: !input trigger_input
      match: any
      state: 'on'
    - alias: Check if night lights entity state is enabled
      condition: or
      conditions:
      - condition: and
        conditions:
        - '{{ include_grace_period == ''enable_grace_period'' }}'
        - condition: state
          entity_id: !input grace_period_timer_helper
          state: idle
      - condition: template
        value_template: '{{ include_grace_period == ''disable_grace_period'' }}'
      - condition: template
        value_template: '{{ trigger.to_state.context.parent_id is none }}'
  - condition: and
    conditions:
    - condition: trigger
      id: t2
    - condition: state
      entity_id: !input trigger_input
      match: all
      state: 'off'
  - condition: and
    conditions:
    - condition: trigger
      id: t2
    - condition: template
      value_template: '{{include_trigger_sync == ''enable_trigger_sync''}}'
  - condition: and
    conditions:
    - condition: trigger
      id: t3
    - condition: template
      value_template: '{{include_timer_helper == ''enable_timer_helper''}}'
    - condition: template
      value_template: '{{ expand(trigger_input) | selectattr(''state'', ''=='', ''on'') | list | count > 0 }}'
  - condition: and
    conditions:
    - condition: trigger
      id: t4
    - '{{include_motion_trigger == ''enable_motion_trigger''}}'
    - alias: Check if grace period is enabled
      condition: or
      conditions:
      - condition: and
        conditions:
        - '{{ expand(trigger_input) | selectattr(''state'', ''=='', ''on'') | list | count > 0 }}'
      - condition: and
        conditions:
        - condition: template
          value_template: '{{ include_grace_period == ''enable_grace_period'' }}'
        - condition: state
          entity_id: !input grace_period_timer_helper
          state: active
  - condition: and
    conditions:
    - condition: trigger
      id: t5_on
    - '{{ ''bypass_enabled_turn_on'' in include_bypass }}'
  - condition: and
    conditions:
    - condition: trigger
      id: t5_off
    - '{{ ''bypass_enabled_turn_off'' in include_bypass }}'
  - condition: and
    conditions:
    - condition: trigger
      id: t5_stop
    - '{{ ''bypass_enabled_stop'' in include_bypass }}'
  - condition: and
    conditions:
    - condition: trigger
      id: t6_on
    - '{{ ''bypass_enabled_turn_on'' in include_bypass }}'
  - condition: and
    conditions:
    - condition: trigger
      id: t6_off
    - '{{ ''bypass_enabled_turn_off'' in  include_bypass }}'
  - condition: and
    conditions:
    - condition: trigger
      id: t6_stop
    - '{{ ''bypass_enabled_stop'' in include_bypass }}'
  - condition: and
    conditions:
    - condition: trigger
      id: t7
    - condition: template
      value_template: '{{ expand(trigger_input) | selectattr(''state'', ''=='', ''on'') | list | count > 0 }}'
  - condition: and
    conditions:
    - condition: trigger
      id: t7
    - '{{ (''bypass_enabled_turn_on'' in include_bypass) or (''bypass_enabled_turn_off'' in include_bypass) or (''bypass_enabled_stop'' in include_bypass) }}'
    - '{{ (''bypass_auto_off_enabled_on'' in include_bypass_auto_off) or (''bypass_auto_off_enabled_off'' in include_bypass_auto_off) or (''bypass_auto_off_enabled_stop'' in include_bypass_auto_off) }}'
    - condition: or
      conditions:
      - condition: state
        entity_id: !input bypass_lights_on
        match: any
        state: 'on'
      - condition: state
        entity_id: !input bypass_lights_off
        match: any
        state: 'on'
      - condition: state
        entity_id: !input bypass_lights_stop
        match: any
        state: 'on'
- condition: or
  conditions:
  - '{{ include_bypass == [] }}'
  - condition: and
    conditions:
    - '{{ (''bypass_enabled_turn_on'' in include_bypass) and (''bypass_enabled_turn_off'' in include_bypass) and (''bypass_enabled_stop'' in include_bypass) }}'
    - condition: state
      entity_id: !input bypass_lights_on
      state: 'off'
    - condition: state
      entity_id: !input bypass_lights_off
      state: 'off'
    - condition: state
      entity_id: !input bypass_lights_stop
      state: 'off'
  - condition: and
    conditions:
    - '{{ (''bypass_enabled_turn_on'' in include_bypass) and (''bypass_enabled_turn_off'' in include_bypass) and (''bypass_enabled_stop'' not in include_bypass) }}'
    - condition: state
      entity_id: !input bypass_lights_on
      state: 'off'
    - condition: state
      entity_id: !input bypass_lights_off
      state: 'off'
  - condition: and
    conditions:
    - '{{ (''bypass_enabled_turn_on'' in include_bypass) and (''bypass_enabled_turn_off'' not in include_bypass) and (''bypass_enabled_stop'' in include_bypass) }}'
    - condition: state
      entity_id: !input bypass_lights_on
      state: 'off'
    - condition: state
      entity_id: !input bypass_lights_stop
      state: 'off'
  - condition: and
    conditions:
    - '{{ (''bypass_enabled_turn_on'' not in include_bypass) and (''bypass_enabled_turn_off'' in include_bypass) and (''bypass_enabled_stop'' in include_bypass) }}'
    - condition: state
      entity_id: !input bypass_lights_off
      state: 'off'
    - condition: state
      entity_id: !input bypass_lights_stop
      state: 'off'
  - condition: and
    conditions:
    - '{{ (''bypass_enabled_turn_on'' in include_bypass) and (''bypass_enabled_turn_off'' not in include_bypass) and (''bypass_enabled_stop'' not in include_bypass) }}'
    - condition: state
      entity_id: !input bypass_lights_on
      state: 'off'
  - condition: and
    conditions:
    - '{{ (''bypass_enabled_turn_on'' not in include_bypass) and (''bypass_enabled_turn_off'' in include_bypass) and (''bypass_enabled_stop'' not in include_bypass) }}'
    - condition: state
      entity_id: !input bypass_lights_off
      state: 'off'
  - condition: and
    conditions:
    - '{{ (''bypass_enabled_turn_on'' not in include_bypass) and (''bypass_enabled_turn_off'' not in include_bypass) and (''bypass_enabled_stop'' in include_bypass) }}'
    - condition: state
      entity_id: !input bypass_lights_stop
      state: 'off'
  - condition: trigger
    id:
    - t5_on
    - t5_off
    - t5_stop
    - t6_on
    - t6_off
    - t6_stop
    - t7
action:
  # –ù–∏–∂–µ ‚Äî –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –±–ª–æ–∫ action –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π.
  # –û–Ω –æ—Å—Ç–∞–≤–ª–µ–Ω –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º, –∫–∞–∫ –≤ –∏—Å—Ö–æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ, —á—Ç–æ–±—ã –Ω–µ –≤–ª–∏—è—Ç—å –Ω–∞ –ª–æ–≥–∏–∫—É/—à–∞–±–ª–æ–Ω—ã.
  # –ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ, –º–æ–≥—É –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –≤–∞—Ä–∏–∞–Ω—Ç, –≥–¥–µ —Ç–æ–ª—å–∫–æ alias –≤–Ω—É—Ç—Ä–∏ action —Ç–æ–∂–µ –ø–µ—Ä–µ–≤–µ–¥–µ–Ω—ã,
  # –Ω–µ –º–µ–Ω—è—è –Ω–∏ –æ–¥–Ω–æ–≥–æ –∫–ª—é—á–∞/—à–∞–±–ª–æ–Ω–∞ ‚Äî —Å–∫–∞–∂–∏—Ç–µ.
- choose:
  - alias: By-pass is turned on & check by-pass option - Turn lights on
    conditions:
    - condition: trigger
      id: t5_on
    sequence:
    - choose:
      - alias: If grace period is selected
        conditions:
        - condition: template
          value_template: '{{include_grace_period == ''enable_grace_period''}}'
        - condition: template
          value_template: '{{include_motion_trigger == ''enable_motion_trigger''}}'
        - condition: state
          entity_id: !input grace_period_timer_helper
          state: active
        sequence:
        - alias: Cancel the timer helper
          action: timer.cancel
          entity_id: !input grace_period_timer_helper
    - alias: Turn ON the entities
      action: homeassistant.turn_on
      entity_id: !input trigger_input
    - alias: Check by-pass settings and preform the correct action
      if:
      - condition: or
        conditions:
        - condition: and
          conditions:
          - alias: Check if the by-pass auto off is enabled
            condition: template
            value_template: '{{ ''bypass_auto_off_enabled_on'' in include_bypass_auto_off }}'
          - condition: state
            entity_id: !input bypass_lights_on
            match: any
            state: 'on'
        - condition: and
          conditions:
          - alias: Check if the by-pass auto off is enabled
            condition: template
            value_template: '{{ ''bypass_auto_off_enabled_off'' in include_bypass_auto_off }}'
          - condition: state
            entity_id: !input bypass_lights_off
            match: any
            state: 'on'
        - condition: and
          conditions:
          - alias: Check if the by-pass auto off is enabled
            condition: template
            value_template: '{{ ''bypass_auto_off_enabled_stop'' in include_bypass_auto_off }}'
          - condition: state
            entity_id: !input bypass_lights_stop
            match: any
            state: 'on'
      then:
      - choose:
        - alias: Check if the time helper is enabled
          conditions:
          - condition: template
            value_template: '{{include_timer_helper == ''enable_timer_helper''}}'
          sequence:
          - alias: Turn ON the timer helper
            action: timer.start
            entity_id: !input timer_helper
            data:
              duration:
                minutes: !input bypass_auto_off_delay
          - alias: Wait the number of minutes set in the by-pass auto off time delay
            wait_for_trigger:
            - trigger: event
              event_type: timer.finished
              event_data:
                entity_id: !input timer_helper
        - alias: Check if the time helper is disabled
          conditions:
          - condition: template
            value_template: '{{include_timer_helper == ''disable_timer_helper''}}'
          sequence:
          - alias: Wait the number of minutes set in the by-pass auto off time delay
            delay:
              minutes: !input bypass_auto_off_delay
      - alias: Parallel Actions for the by-pass auto off
        parallel:
        - sequence:
          - choose:
            - conditions:
              - condition: template
                value_template: '{{ (''bypass_enabled_turn_on'' in include_bypass) and (''bypass_auto_off_enabled_on'' in include_bypass_auto_off) }}'
              sequence:
              - alias: Turn off the by-pass
                action: homeassistant.turn_off
                entity_id: !input bypass_lights_on
        - sequence:
          - choose:
            - conditions:
              - condition: template
                value_template: '{{ (''bypass_enabled_turn_off'' in include_bypass) and (''bypass_auto_off_enabled_off'' in include_bypass_auto_off) }}'
              sequence:
              - alias: Turn off the by-pass
                action: homeassistant.turn_off
                entity_id: !input bypass_lights_off
        - sequence:
          - choose:
            - conditions:
              - condition: template
                value_template: '{{ (''bypass_enabled_stop'' in include_bypass) and (''bypass_auto_off_enabled_stop'' in include_bypass_auto_off) }}'
              sequence:
              - alias: Turn off the by-pass
                action: homeassistant.turn_off
                entity_id: !input bypass_lights_stop
      - stop: Stop the automation
      else:
      - choose:
        - alias: Check if the time helper is enabled
          conditions:
          - condition: template
            value_template: '{{include_timer_helper == ''enable_timer_helper''}}'
          sequence:
          - alias: Cancel the timer helper
            action: timer.cancel
            entity_id: !input timer_helper
      - stop: Stop the automation
  # ... (–æ—Å—Ç–∞–ª—å–Ω–∞—è —á–∞—Å—Ç—å –±–ª–æ–∫–∞ action –∏–¥–µ–Ω—Ç–∏—á–Ω–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª—É –∏ –æ–ø—É—â–µ–Ω–∞ –¥–ª—è –∫—Ä–∞—Ç–∫–æ—Å—Ç–∏)
